# ch09

- [origin](https://www.buildyourownlisp.com/chapter9_s_expressions)
  - [s_expressions.c](https://github.com/orangeduck/BuildYourOwnLisp/blob/master/src/s_expressions.c)

## 0x00

lval_take는 lval_pop하면서 자신을 삭제

``` c
typedef struct lval {
  int type;
  long num;
  /* Error and Symbol types have some string data */
  char* err;
  char* sym;
  /* Count and Pointer to a list of /.'"lval*" */
  int count;
  struct lval** cell;
} lval;

mpca_lang(MPCA_LANG_DEFAULT,
  "                                          \
    number : /-?[0-9]+/ ;                    \
    symbol : '+' | '-' | '*' | '/' ;         \
    sexpr  : '(' <expr>* ')' ;               \
    expr   : <number> | <symbol> | <sexpr> ; \
    lispy  : /^/ <expr>* /$/ ;               \
  ",
  Number, Symbol, Sexpr, Expr, Lispy);
```

## TODO c 함수 연습문제

- alloc & realloc

``` zig
var buffer = try allocator.alloc(u8, 4);
buffer = try allocator.realloc(buffer, 4, 8);
```

- memcpy & memmove
  - memcpy목적지가 소스와 전혀 겹칠 수 없습니다.
  - memmove를 사용하면 가능합니다

``` zig
std.mem.copy(u8, dst, src);  // memcpy
std.mem.move(u8, dst, src);  // memmove
```

## src/ch09.zig

``` zig
{{#include ../../lispy-zig/ch09/src/ch09.zig}}
```


## build.zig

``` zig
{{#include ../../lispy-zig/ch09/build.zig}}
```
