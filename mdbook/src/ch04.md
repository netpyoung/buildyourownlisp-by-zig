# ch04

- [origin](https://www.buildyourownlisp.com/chapter4_interactive_prompt)
  - [prompt.c](https://github.com/orangeduck/BuildYourOwnLisp/blob/master/src/prompt.c)

##

- libedit을 사용하여 입력 히스토리를 저장.
- while루프를 돌면서 사용자와 인터렉티브 환경


## Zig 타입

| Zig 타입       | C와의 대응                          | 의미                                 |
| -------------- | ----------------------------------- | ------------------------------------ |
| u8             | uint8_t 혹은 std::byte              | unsigned 8-bit integer               |
| `*u8`          | `uint8_t*`                          | 단일 `u8`을 가리키는 포인터          |
| `[]u8`         | C에는 직접 대응 없음 (Zig 슬라이스) | 길이 포함한 슬라이스                 |
| `[*]u8`        | 없음 (Zig 내부용)                   | 길이 모르는 raw pointer              |
| `[:0]u8`       | `const char*`                       | null-terminated C string (읽기 전용) |
| `[*c]u8`       | `uint8_t*` 또는 `char*`             | C 호환 raw pointer                   |
| `*const [N]u8` | `const uint8_t[N]*`                 | 길이 고정된 배열의 포인터            |


## libedit

### Ubuntu

``` sh
snap install zig --classic --beta
sudo apt install libedit-dev
```

- editline/readline.h 만 사용하면 됨.
  - <https://salsa.debian.org/debian/libedit/-/blob/master/src/editline/readline.h>
  - /usr/include/editline/history.h -> readline.h
    - 이전에 있었던 editline/history.h가 editline/readline.h로 됨. 

### macOs

- 내장된 readline.h
  - /usr/local/include, /usr/local/lib로
- 혹은 brew install libedit
  - <https://formulae.brew.sh/formula/libedit>
  - <https://thrysoee.dk/editline/>
    - "editline/readline.h"

## src/ch04.zig

``` zig
{{#include ../../lispy-zig/ch04/src/ch04.zig}}
```

## build.zig

``` zig
{{#include ../../lispy-zig/ch04/build.zig}}
```

